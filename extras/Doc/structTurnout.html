<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="DoxyPress 1.2.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DCCpp: Turnout Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxypress.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by DoxyPress -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DCCpp
   </div>
   <div id="projectbrief">This is the library version of a program for Arduino to control railroading DCC devices.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by DoxyPress 1.2.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structTurnout.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="structTurnout-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Turnout Struct Reference</div>  </div>
  <div class="clear-floats"></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="Turnout_8h_source.html">Turnout.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3e39c675007579c6db294a0e1f57f39d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e39c675007579c6db294a0e1f57f39d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>begin</b> (int id, int add, int subAdd)</td></tr>
<tr class="separator:a3e39c675007579c6db294a0e1f57f39d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7d51e1b8aa3cf3a862e3b500be3a88c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab7d51e1b8aa3cf3a862e3b500be3a88c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set</b> (int id, int add, int subAdd)</td></tr>
<tr class="separator:ab7d51e1b8aa3cf3a862e3b500be3a88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25bcc47a674e6040134b1565e59d136"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af25bcc47a674e6040134b1565e59d136"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>activate</b> (int s = 1)</td></tr>
<tr class="separator:af25bcc47a674e6040134b1565e59d136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b4e8e33fc8fca0458f20beee2f1ed5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01b4e8e33fc8fca0458f20beee2f1ed5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>inactivate</b> ()</td></tr>
<tr class="separator:a01b4e8e33fc8fca0458f20beee2f1ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d2cd012d42732e65333fa80592a20fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d2cd012d42732e65333fa80592a20fb"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isActivated</b> ()</td></tr>
<tr class="separator:a8d2cd012d42732e65333fa80592a20fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa4f022fcfeadf52f135b2d0279a8e360"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4f022fcfeadf52f135b2d0279a8e360"></a>
static Turnout *&#160;</td><td class="memItemRight" valign="bottom"><b>get</b> (int id)</td></tr>
<tr class="separator:aa4f022fcfeadf52f135b2d0279a8e360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb5a1b49490aa6574da2c0423474d9b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb5a1b49490aa6574da2c0423474d9b3"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>remove</b> (int id)</td></tr>
<tr class="separator:acb5a1b49490aa6574da2c0423474d9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8315c54aeda1b57127ee6c73b2ff01c5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8315c54aeda1b57127ee6c73b2ff01c5"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><b>count</b> ()</td></tr>
<tr class="separator:a8315c54aeda1b57127ee6c73b2ff01c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb8a6e70292d42dcb15044aaa9bd1f79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acb8a6e70292d42dcb15044aaa9bd1f79"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>load</b> ()</td></tr>
<tr class="separator:acb8a6e70292d42dcb15044aaa9bd1f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923ec798731b014dc3eb02522bd91110"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a923ec798731b014dc3eb02522bd91110"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>store</b> ()</td></tr>
<tr class="separator:a923ec798731b014dc3eb02522bd91110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae444d3ee19c2ad33111a93061dc4fd62"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae444d3ee19c2ad33111a93061dc4fd62"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>parse</b> (char *c)</td></tr>
<tr class="separator:ae444d3ee19c2ad33111a93061dc4fd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f7c0f561dd220e62d1c1f94b0fd967"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58f7c0f561dd220e62d1c1f94b0fd967"></a>
static Turnout *&#160;</td><td class="memItemRight" valign="bottom"><b>create</b> (int id, int add, int subAdd)</td></tr>
<tr class="separator:a58f7c0f561dd220e62d1c1f94b0fd967"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a404b78691015f78baf8183b0db3dc5a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a404b78691015f78baf8183b0db3dc5a2"></a>
struct <a class="el" href="structTurnoutData.html">TurnoutData</a>&#160;</td><td class="memItemRight" valign="bottom"><b>data</b></td></tr>
<tr class="separator:a404b78691015f78baf8183b0db3dc5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1de16672bf5e622f93dc0316a6dd532"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1de16672bf5e622f93dc0316a6dd532"></a>
Turnout *&#160;</td><td class="memItemRight" valign="bottom"><b>nextTurnout</b></td></tr>
<tr class="separator:ab1de16672bf5e622f93dc0316a6dd532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8899396b83282ac85ab7b02cc4f37a1d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8899396b83282ac85ab7b02cc4f37a1d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>eepromPos</b></td></tr>
<tr class="separator:a8899396b83282ac85ab7b02cc4f37a1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:af86bebdc284072541022d9efa4727039"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af86bebdc284072541022d9efa4727039"></a>
static Turnout *&#160;</td><td class="memItemRight" valign="bottom"><b>firstTurnout</b> = NULL</td></tr>
<tr class="separator:af86bebdc284072541022d9efa4727039"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DCC++ BASE STATION can keep track of the direction of any turnout that is controlled by a DCC stationary accessory decoder.</p>
<p>If the <a class="el" href="structTextCommand.html">TextCommand</a> is used, all turnouts, as well as any other DCC accessories connected in this fashion, can always be operated using the DCC BASE STATION Accessory command:</p>
<pre class="fragment">&lt;a ADDRESS SUBADDRESS ACTIVATE&gt;
</pre><p>However, this general command simply sends the appropriate DCC instruction packet to the main tracks to operate connected accessories. It does not store or retain any information regarding the current status of that accessory.</p>
<p>To have this sketch store and retain the direction of DCC-connected turnouts, as well as automatically invoke the required  command as needed, first define/edit/delete such turnouts using the following variations of the "T" command:</p>
<pre class="fragment">&lt;T ID ADDRESS SUBADDRESS&gt;
</pre><p> creates a new turnout ID, with specified ADDRESS and SUBADDRESS if turnout ID already exists, it is updated with specificed ADDRESS and SUBADDRESS returns: &lt;O&gt; if successful and &lt;X&gt; if unsuccessful (e.g. out of memory)</p>
<pre class="fragment">&lt;T ID&gt;
</pre><p> deletes definition of turnout ID returns: &lt;O&gt; if successful and &lt;X&gt; if unsuccessful (e.g. ID does not exist)</p>
<pre class="fragment">&lt;T&gt;
</pre><p> lists all defined turnouts returns: &lt;H id="" address="" subaddress="" throw&gt;=""&gt; for each defined turnout or &lt;X&gt; if no turnouts defined</p>
<p>where</p>
<pre class="fragment">ID: the numeric ID (0-32767) of the turnout to control
ADDRESS:  the primary address of the decoder controlling this turnout (0-511)
SUBADDRESS: the subaddress of the decoder controlling this turnout (0-3)
</pre><p>Once all turnouts have been properly defined, use the &lt;E&gt; command to store their definitions to EEPROM. If you later make edits/additions/deletions to the turnout definitions, you must invoke the &lt;E&gt; command if you want those new definitions updated in the EEPROM. You can also clear everything stored in the EEPROM by invoking the &lt;e&gt; command.</p>
<p>To "throw" turnouts that have been defined use:</p>
<pre class="fragment">&lt;T ID THROW&gt;
</pre><p> sets turnout ID to either the "thrown" or "unthrown" position returns: &lt;H id="" throw&gt;=""&gt;, or &lt;X&gt; if turnout ID does not exist</p>
<p>where</p>
<pre class="fragment">ID: the numeric ID (0-32767) of the turnout to control
THROW: 0 (unthrown) or 1 (thrown)
</pre><p>When controlled as such, the Arduino updates and stores the direction of each Turnout in EEPROM so that it is retained even without power. A list of the current directions of each Turnout in the form &lt;H id="" throw&gt;=""&gt; is generated by this sketch whenever the &lt;s&gt; status command is invoked. This provides an efficient way of initializing the directions of any Turnouts being monitored or controlled by a separate interface or GUI program.</p>
<p>Without <a class="el" href="structTextCommand.html">TextCommand</a>, this is a classic C++ usage. An instance of the structure is created by the user, and fonctions like begin() and activate() can be applied on this instance. load() and store() of the class can still be used (if EEPROM is activated). </p>

<p class="definition">Definition at line <a class="el" href="Turnout_8h_source.html#l00098">98</a> of file <a class="el" href="Turnout_8h_source.html">Turnout.h</a>.</p>
</div><hr/>The documentation for this struct was generated from the following files:<ul>
<li>D:/Mes documents/Trusty/Arduino/Libraries/DCCpp/src/<a class="el" href="Turnout_8h_source.html">Turnout.h</a></li>
<li>D:/Mes documents/Trusty/Arduino/Libraries/DCCpp/src/<a class="el" href="Turnout_8cpp_source.html">Turnout.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- Generated by DoxyPress 1.2.10 -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structTurnout.html">Turnout</a></li>
    <li class="footer">Generated on lun. nov. 27 2017 16:55:13 for DCCpp &nbsp; by
    <a href="http://www.copperspice.com/documentation-doxypress.html">
    <img class="footer" src="doxypress.png" alt="DoxyPress"/></a> 1.2.10 </li>
  </ul>
</div>
</body>
</html>
